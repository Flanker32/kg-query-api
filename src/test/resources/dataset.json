{
  "@context": {
    "@vocab": "http://schema.hbp.eu/graph_query/",
    "schema": "http://schema.org/",
    "minds": "http://hbp.eu/minds#",
    "search": "http://schema.hbp.eu/search_ui/",
    "nexus": "https://nexus-dev.humanbrainproject.org/vocabs/nexus/core/terms/v0.1.0/",
    "nexus_instance": "https://nexus-dev.humanbrainproject.org/v0/schemas/",
    "fieldname": {
      "@id": "fieldname",
      "@type": "@id"
    },
    "merge": {
      "@id": "merge",
      "@type": "@id"
    },
    "relative_path": {
      "@id": "relative_path",
      "@type": "@id"
    },
    "root_schema": {
      "@id": "root_schema",
      "@type": "@id"
    }
  },
  "@type": "DataTransformation",
  "schema:name": "Dataset",
  "root_schema": "nexus_instance:minds/core/dataset/v0.0.4",
  "fields": [
    {
      "relative_path": "schema:identifier",
      "required": true
    },
    {
      "fieldname": "search:title",
      "relative_path": "schema:name",
      "required": true,
      "label": ".....",
      "elasticsearch": {
        "boost": 21
      },
      "lucene":{

      }
    },
    {
      "fieldname": "search:doi",
      "relative_path": {
        "@id": "minds:doireference",
        "reverse": true
      },
      "fields": [
        {
          "fieldname": "search:doi",
          "relative_path": "minds:doi"
        },
        {
          "fieldname": "search:citation",
          "relative_path": "minds:citation"
        }
      ]
    },
    {
      "fieldname": "search:component",
      "relative_path": "minds:component",
      "fields": [
        {
          "fieldname": "search:uuid",
          "relative_path": "nexus:uuid"
        },
        {
          "fieldname": "search:identifier",
          "relative_path": "schema:identifier"
        },
        {
          "fieldname": "search:name",
          "relative_path": "schema:name"
        }
      ]
    },
    {
      "fieldname": "search:description",
      "relative_path": "schema:description"
    },
    {
      "fieldname": "search:contributors",
      "relative_path": "minds:contributors",
      "ensure_order": true,
      "fields": [
        {
          "fieldname": "search:name",
          "relative_path": "minds:shortName"
        },
        {
          "fieldname": "search:uuid",
          "relative_path": "nexus:uuid"
        },
        {
          "fieldname": "search:identifier",
          "relative_path": "schema:identifier"
        }
      ]
    },
    {
      "fieldname": "search:owners",
      "relative_path": "minds:owners",
      "ensure_order": true,
      "fields": [
        {
          "fieldname": "search:name",
          "relative_path": "schema:name"
        },
        {
          "fieldname": "search:uuid",
          "relative_path": "nexus:uuid"
        },
        {
          "fieldname": "search:identifier",
          "relative_path": "schema:identifier"
        }
      ]
    },
    {
      "fieldname": "search:publications",
      "relative_path": "minds:publications",
      "fields": [
        {
          "fieldname": "search:citation",
          "relative_path": "minds:cite"
        },
        {
          "fieldname": "search:doi",
          "relative_path": "minds:doi"
        }
      ]
    },
    {
      "fieldname": "search:parcellationAtlas",
      "sort": true,
      "relative_path": [
        "minds:parcellationAtlas",
        "schema:name"
      ]
    },
    {
      "fieldname": "search:parcellationRegion",
      "sort": true,
      "relative_path": [
        "minds:parcellationRegion",
        "schema:name"
      ]
    },
    {
      "fieldname": "search:preparation",
      "sort": true,
      "relative_path": [
        "minds:activity",
        "minds:preparation",
        "schema:name"
      ]
    },
    {
      "fieldname": "search:methods",
      "sort": true,
      "merge": [
        {
          "relative_path": [
            "minds:activity",
            "minds:methods",
            "schema:name"
          ]
        },
        {
          "relative_path": [
            "minds:specimen_group",
            "minds:subjects",
            {
              "@id": "minds:associated_entity",
              "reverse": true
            },
            "minds:methods",
            "schema:name"
          ]
        }
      ]
    },
    {
      "fieldname": "search:protocols",
      "sort": true,
      "relative_path": [
        "minds:activity",
        "minds:protocols",
        "schema:name"
      ]
    },
    {
      "fieldname": "search:license",
      "relative_path": "minds:license_info",
      "fields": [
        {
          "fieldname": "search:url",
          "relative_path": "schema:url"
        },
        {
          "fieldname": "search:name",
          "relative_path": "schema:name",
          "sort": true
        }
      ]
    },
    {
      "fieldname": "search:external_datalink",
      "relative_path": "minds:external_datalink"
    },
    {
      "fieldname": "search:files",
      "merge": [
        {
          "relative_path": [
            {
              "@id": "minds:associated_entity",
              "reverse": true
            },
            "minds:file"
          ]
        },
        {
          "relative_path": [
            "minds:specimen_group",
            "minds:subjects",
            "minds:samples",
            {
              "@id": "minds:associated_entity",
              "reverse": true
            },
            "minds:file"
          ]
        }
      ],
      "fields": [
        {
          "fieldname": "search:name",
          "relative_path": "schema:name",
          "required": true
        },
        {
          "fieldname": "search:absolute_path",
          "relative_path": "minds:absolute_path",
          "required": true
        }
      ]
    },
    {
      "fieldname": "search:neuroglancer",
      "relative_path": {
        "@id": "minds:reference",
        "reverse": true
      },
      "fields": [
        {
          "fieldname": "search:url",
          "relative_path": "minds:postfix"
        },
        {
          "fieldname": "search:name",
          "relative_path": "schema:name"
        }
      ]
    },
    {
      "fieldname": "search:subjects",
      "relative_path": [
        "minds:specimen_group",
        "minds:subjects"
      ],
      "fields": [
        {
          "fieldname": "search:name",
          "relative_path": "schema:name",
          "sort": true
        },
        {
          "fieldname": "search:identifier",
          "relative_path": "schema:identifier"
        },
        {
          "fieldname": "search:uuid",
          "relative_path": "nexus:uuid"
        },
        {
          "fieldname": "search:species",
          "relative_path": "minds:species",
          "fields": [
            {
              "fieldname": "search:name",
              "relative_path": "schema:name"
            },
            {
              "fieldname": "search:uuid",
              "relative_path": "nexus:uuid"
            },
            {
              "fieldname": "search:identifier",
              "relative_path": "schema:identifier"
            }
          ]
        },
        {
          "fieldname": "search:sex",
          "relative_path": [
            "minds:sex",
            "schema:name"
          ]
        },
        {
          "fieldname": "search:strain",
          "relative_path": "minds:strains"
        },
        {
          "fieldname": "search:genotype",
          "relative_path": "minds:genotype"
        },
        {
          "fieldname": "search:experimentmethod",
          "relative_path": [
            "minds:experimentmethod",
            "schema:name"
          ]
        },
        {
          "fieldname": "search:samples",
          "relative_path": "minds:samples",
          "fields": [
            {
              "fieldname": "search:name",
              "relative_path": "schema:name"
            },
            {
              "fieldname": "search:uuid",
              "relative_path": "nexus:uuid"
            },
            {
              "fieldname": "search:identifier",
              "relative_path": "schema:identifier"
            }
          ]
        }
      ]
    },
    {
      "fieldname": "search:embargo",
      "relative_path": [
        "minds:embargo_status",
        "schema:name"
      ]
    },
    {
      "fieldname": "search:releasedate",
      "relative_path": "minds:release_date"
    },
    {
      "fieldname": "search:brainAtlasViewer",
      "relative_path": [
        {
          "@id": "minds:reference",
          "reverse": true
        },
        "minds:postfix"
      ]
    }
  ]
}